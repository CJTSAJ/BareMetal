### 背景
目前主流的IO虚拟化框架：半虚拟化和SR-IOV。SR--IOV性能很好，但硬件会直接暴露给虚拟机，带来很多不利的后果，最严重的就是**虚拟机热迁移会很困难**，因为在SR-IOV框架下，很多**硬件状态对hypervisor是只读的**。而半虚拟化的热迁移十分简便，因为都是软件状态。

**bonding driver**：有人**用Linux Ethernet Bonding Driver来解决SR-IOV热迁移问题**。
Linux bonding 驱动**把多个网络接口设备捆绑为单个的网络接口设置来使用**，用于网络负载均衡及网络冗余。对于bonding的网络负载均衡是我们在文件服务器中常用到的，**比如把三块网卡，当做一块来用，解决一个IP地址，流量过大**，服务器网络压力过大的问题。
对于服务器来说，网络设备的稳定也是比较重要的，特别是网卡。在生产型的系统中，网卡的可靠性就更为重要了。bonding 也能为网卡提供冗余的支持。把多块网卡绑定到一个IP地址，**当一块网卡发生物理性损坏的情况下，另一块网卡自动启用，并提供正常的服务**。

此种驱动运用了热插拔的特性。在热迁移开始之前，分配给虚拟机的VF 会被解绑，取而代之的是一块半虚拟化的网卡。在这之后，网络流量将会被这块虚拟网卡而非VF处理。
